include_directories(${cdflib_SOURCE_DIR}/src/include)

add_library(cdflib SHARED 
	cdflib.c cdfcre.c cdfope.c cdfclo.c cdfdel.c cdfsel.c cdfcon.c cdfget.c
	cdfmisc2.c cdfread.c cdfwrite.c cdfhyper.c epochuf.c dirutils.c
	cdfput1.c cdfput2.c cdfcsi.c cdffsi.c cdffii.c cdftext.c cdfed.c
	cdfstr.c cdfvalid.c cdfmem.c vstream.c epochu.c cdfmisc3.c cdfhuff.c
	cdfrle.c cdfmisc1.c cdfalloc.c cdfgzip.c cdfalloc64.c cdfdel64.c
	cdfmisc2_64.c  cdfread64.c cdfclo64.c cdfget64.c cdfmisc3_64.c
	cdfsel64.c cdfcon64.c  cdfput1_64.c cdfwrite64.c cdfcre64.c
	cdfmisc1_64.c cdfput2_64.c vstream64.c  cdfhyper64.c cdfrle64.c
	cdfhuff64.c cdfgzip64.c cdffsi2.c cdffsi3.c cdfcks.c  cdfmd5.c cdfsav.c
	cdfvalidator.c cdfvalidator64.c cdftt2000.c cdftt2000f.c zlib/adler32.c
	zlib/crc32.c zlib/deflate.c zlib/inffast.c zlib/inflate.c zlib/infback.c
	zlib/inftrees.c zlib/trees.c zlib/zutil.c
)
set_target_properties(cdflib PROPERTIES SOVERSION 3.7.1)

install(TARGETS cdflib DESTINATION lib)
install(FILES 
	"${cdflib_SOURCE_DIR}/src/include/cdf.h" 
	"${cdflib_SOURCE_DIR}/src/include/cdf.inc" 
	"${cdflib_SOURCE_DIR}/src/include/cdflib.h" 
	"${cdflib_SOURCE_DIR}/src/include/cdflib64.h" 
	"${cdflib_SOURCE_DIR}/src/include/cdfdist.h" 
	"${cdflib_SOURCE_DIR}/src/include/cdfconfig.h" 
	DESTINATION include)
